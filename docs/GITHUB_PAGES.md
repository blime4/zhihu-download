# GitHub Pages 部署指南

本项目可以通过 GitHub Pages 进行纯静态部署，无需任何服务器，完全免费！

## 架构说明

```
┌─────────────────────────────────────────────────────────┐
│                    GitHub Pages                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  静态展示网站 (docs/index.html)                  │   │
│  │  - 功能介绍                                     │   │
│  │  - 安装指南                                     │   │
│  │  - Tampermonkey 脚本分发                        │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                         │
                         │ 用户安装脚本
                         ▼
┌─────────────────────────────────────────────────────────┐
│                   用户浏览器                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │  Tampermonkey 扩展                              │   │
│  │  - 文章解析                                     │   │
│  │  - Markdown 转换                                │   │
│  │  - 图片下载                                     │   │
│  │  - ZIP 生成                                     │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

## 部署步骤

### 1. 启用 GitHub Pages

在 GitHub 仓库中：

1. 进入 **Settings** (设置)
2. 点击左侧 **Pages** (页面)
3. 在 **Source** 下选择：
   - Branch: `main` (或你的主分支)
   - Folder: `/docs`
4. 点击 **Save** (保存)

### 2. 等待部署

GitHub 会自动构建和部署你的站点：

- 通常需要 1-2 分钟
- 完成后会显示绿色的部署状态
- 你的网站将上线在：`https://你的用户名.github.io/zhihu-download/`

### 3. 配置自定义域名（可选）

如果需要使用自定义域名：

1. 在仓库根目录创建 `docs/CNAME` 文件
2. 文件内容填写你的域名，如：`yourdomain.com`
3. 在域名提供商处添加 DNS 记录：
   - 类型: `CNAME`
   - 名称: `www`（或根域名的 @）
   - 值: `你的用户名.github.io`

## 文件结构

```
zhihu-download/
├── docs/
│   ├── index.html          # GitHub Pages 主页
│   ├── CNAME              # 自定义域名配置（可选）
│   └── GITHUB_PAGES.md    # 本文档
├── tampermonkey.js        # Tampermonkey 脚本
├── app.py                 # Flask 应用（独立使用）
└── README.md              # 项目说明
```

## 工作原理

### 静态展示页面 (GitHub Pages)

- **无需服务器**：纯 HTML/CSS/JS，托管在 GitHub
- **无限流量**：GitHub 提供免费托管
- **自动 HTTPS**：内置 SSL 证书
- **全球 CDN**：快速访问

### Tampermonkey 脚本

- **客户端运行**：在用户浏览器中执行
- **无 CORS 限制**：绕过跨域限制
- **隐私保护**：数据不经过任何服务器
- **离线工作**：安装后无需网络

## 两种部署方式对比

| 特性 | GitHub Pages (纯前端) | Flask 应用 (需要服务器) |
|------|---------------------|----------------------|
| 成本 | 完全免费 | 需要服务器费用 |
| 部署难度 | 简单 (一次配置) | 需要配置环境 |
| 维护成本 | 零维护 | 需要维护服务器 |
| 性能 | 全球 CDN 加速 | 取决于服务器位置 |
| 功能 | 完整功能 | 完整功能 |
| 用户隐私 | 100% 本地处理 | 需信任服务器 |

## 常见问题

### Q: 脚本更新后需要重新安装吗？

A: 不需要。Tampermonkey 会自动检查更新，你可以设置自动更新选项。

### Q: 支持哪些浏览器？

A: 支持 Chrome、Edge、Firefox 等所有支持 Tampermonkey 的浏览器。

### Q: 为什么选择 GitHub Pages 而不是 Flask？

A: GitHub Pages 的优势：
- 完全免费
- 无需维护
- 自动 HTTPS
- 全球 CDN
- 更好的用户隐私（数据不经过服务器）

### Q: Flask 应用还有用吗？

A: 有两种使用场景：
1. **个人使用**：Tampermonkey 脚本 + GitHub Pages
2. **团队/公共使用**：Flask 应用提供 Web 界面

## 技术栈

### GitHub Pages
- 纯 HTML5
- 现代 CSS3 (渐变、动画、响应式)
- 原生 JavaScript (无依赖)

### Tampermonkey 脚本
- DOM 操作
- fetch API
- JSZip (ZIP 生成)
- Turndown (HTML to Markdown)

## 更新日志

- 2025-01-29: 添加 GitHub Pages 纯静态部署方案
- 2025-03-10: 添加 Tampermonkey 脚本支持
